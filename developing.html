<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PXF by Pivotal-Field-Engineering</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  <body>
    <div class="wrapper">      
      <script type="text/javascript" src="header.js"> </script>
      <section>        

<h2>Developing and Testing Extensions</h2>
<h3>Developing an Extension</h3>

<p>There are three key classes one must develop to create a proper extension, and an optional but suggested class for better performance.</p>

<p><b>Fragmenter</b></p>

<p>The Fragmenter is responsible for passing datasource metadata back to HAWQ where it returns fragments of information. A fragment contains the file name and the hosts name where it is located.  Examples include HdfsDataFragmenter, HBaseDataFragmenter, and HiveDataFragmenter.  The class needs to implement the Fragmenter abstract class.</p>

<p><b>Accessor</b></p>

<p>The Accessor retrieves specific fragments and passes records back to the Resolver. For example, the accessor creates a FileInputFormat and a Record Reader for an HDFS file and sends this to the Resolver.  Examples include HdfsSplittableDataAccessor, SplittableFileAccessor base class, and TextFileAccessor.  The class needs to implement the Accessor abstract class.</p>

<p><b>Resolver</b></p>

<p>The Resolver deserializes records and serializes them to a list of OneField objects. PXF converts a OneField object to a GPDBWritable format read by HAWQ. Examples include TextResolver, WritableResolver, AvroResolver, HBaseResolver, and HiveResolver.  The class needs to implement the Resolver abstract class.</p>

<p><b>Analyzer</b></p>

<p>The Analyzer provides PXF statistical data for the HAWQ query optimizer. For detailed explanation on HAWQ statistical data gathering, see the &quot;ANALYZER&quot; section in the PXF External Table and API Reference manual.  An example of an Analyzer is the HdfsAnalyzer.  The class needs to implement the Analyzer abstract class.</p>

<p><b>Profiles</b></p>

<p>Profiles are a means to specify the class names and other parameters for you extension.  They are a cleaner shortcut, where a user specifies a PROFILE in an external table definition instead of the FRAGMENTER, ACCESSOR, RESOLVER, etc.  Both ways will work, but one is certainly less characters to type.  You can install a profile by modifying pxf-profiles.xml in your cluster configuration and push it out to the cluster, or use ICM to reconfigure your PHD cluster.  Changes to the PXF profiles are picked up dynamically and do not necessarily require a restart of the cluster.</p>

<p>More info is found in the PXF guide which can be found on the <a href="http://pivotalhd.docs.gopivotal.com/index.html" target="_blank">Pivotal HD documentation site</a>.</p>

<h3>Testing Extensions</h3>

<p>Why not <code><a href="apidocs/index.html?com/pivotal/pxf/PxfUnit.html" target="_blank">PxfUnit</a></code>?</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/Pivotal-Field-Engineering">Pivotal-Field-Engineering</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
